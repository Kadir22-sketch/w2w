<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="google-site-verification" content="OBLEeD_stNVTYYnM94RxkwStiQnPJsI98_9l7nG8N4c" />

    <!-- Preload kritik kaynaklar -->
    <link rel="preload" href="/src/main.tsx" as="script" crossorigin />
    <link rel="preload" href="/src/index.css" as="style" />

    <!-- Primary Meta Tags -->
    <title>İş İlanları İstanbul Ankara İzmir | 15.000+ Güncel İlan</title>
    <meta name="title" content="İş İlanları İstanbul Ankara İzmir | 15.000+ Güncel İlan">
    <meta name="description" content="İstanbul, Ankara ve İzmir'de güncel iş ilanları. Şoför, garson, kasiyer, kurye, çağrı merkezi ve 100+ kategori. Ücretsiz başvuru." />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="İş İlanları İstanbul Ankara İzmir | 15.000+ Güncel İlan" />
    <meta property="og:description" content="İstanbul, Ankara ve İzmir'de güncel iş ilanları. Şoför, garson, kasiyer, kurye pozisyonları." />
    <meta property="og:url" content="https://isilanlarim.org" />
    <meta property="og:locale" content="tr_TR" />
    <meta property="og:image" content="https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=1200&h=630&fit=crop&crop=center" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="İş İlanları - Türkiye'nin En Güncel İş Fırsatları" />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="İş İlanları İstanbul Ankara İzmir | 15.000+ Güncel İlan" />
    <meta name="twitter:description" content="İstanbul, Ankara ve İzmir'de güncel iş ilanları. Şoför, garson, kasiyer, kurye pozisyonları." />
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=1200&h=630&fit=crop&crop=center" />

    <!-- Social Media Links -->
    <link rel="me" href="https://twitter.com/isilanlarim" />
    <link rel="me" href="https://www.instagram.com/isilanlarim" />
    <link rel="me" href="https://www.linkedin.com/company/isilanlarim" />
    <link rel="me" href="https://www.youtube.com/c/isilanlarim" />

    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow" />
    <meta name="author" content="İşBuldum" />
    <meta name="rating" content="general" />
    <meta name="distribution" content="global" />
    <meta name="revisit-after" content="1 days" />
    <meta name="language" content="Turkish" />
    <meta name="geo.region" content="TR" />
    <meta name="geo.country" content="TR" />
    <meta name="geo.placename" content="Türkiye" />
    <link rel="canonical" href="https://isilanlarim.org" />

    <!-- Mobile Optimization -->
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="apple-mobile-web-app-title" content="İş İlanları" />
    <meta name="application-name" content="İş İlanları" />

    <!-- Performance optimizations -->
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link rel="dns-prefetch" href="https://images.unsplash.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Cache control -->
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
  </head>
  <body>
    <div id="root"></div>

    <!-- Firebase & Dynamic JobPosting Schema -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
      import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";

      // Firebase config from Netlify env
      const firebaseConfig = {
        apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
        authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
        databaseURL: import.meta.env.VITE_FIREBASE_DATABASE_URL,
        projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
        storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
        messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
        appId: import.meta.env.VITE_FIREBASE_APP_ID,
        measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);

      async function generateJobPostingSchema() {
        const dbRef = ref(db);
        try {
          const snapshot = await get(child(dbRef, `jobListings`)); // Firebase’de ilanların olduğu path
          if (snapshot.exists()) {
            const jobs = snapshot.val();
            const jobPostings = Object.values(jobs).map(job => ({
              "@context": "https://schema.org",
              "@type": "JobPosting",
              "title": job.title,
              "description": job.description,
              "datePosted": job.datePosted,
              "validThrough": job.validThrough,
              "employmentType": job.employmentType,
              "hiringOrganization": {
                "@type": "Organization",
                "name": "İşBuldum",
                "sameAs": "https://isilanlarim.org",
                "logo": "https://isilanlarim.org/logo.png"
              },
              "jobLocation": {
                "@type": "Place",
                "address": {
                  "@type": "PostalAddress",
                  "addressLocality": job.city,
                  "addressRegion": "TR",
                  "addressCountry": "TR"
                }
              },
              "url": `https://isilanlarim.org/job/${job.id}`,
              "identifier": {
                "@type": "PropertyValue",
                "name": "job-id",
                "value": job.id
              }
            }));

            const script = document.createElement("script");
            script.type = "application/ld+json";
            script.text = JSON.stringify(jobPostings);
            document.head.appendChild(script);
          } else {
            console.log("No job listings found in Firebase.");
          }
        } catch (error) {
          console.error("Error fetching job listings:", error);
        }
      }

      generateJobPostingSchema();
    </script>

    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
